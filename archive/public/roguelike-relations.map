{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/bvg/bvg.js","roguelike-relations.js","util.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","BVG","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","observe","obj","callback","Object","changes","forEach","change","name","keys","key","tag","data","binding","bvg","SVGElement","document","createElementNS","prop","hasOwnProperty","setAttribute","tagName","Math","random","toString","substr","_tag","_data","_binding","_getBVG","indexOf","stroke","strokeWidth","fill","noFill","defineProperty","value","default","creationFunctions","create","htmlElement","xDimension","yDimension","querySelector","HTMLElement","TypeError","xmlns:xlink","version","width","height","viewBox","join","appendChild","svg","xlink","constructor","rect","x","y","circle","ellipse","rx","ry","line","x1","y1","x2","y2","polyline","points","polygon","group","transform","hyperlink","url","xmlns:href","triangle","sqrt","arc","startAngle","endAngle","getPointOnEllipse","angle","cos","sin","p1","p2","largeArc","PI","sweepArc","d","map","text","_text","innerHTML","apply","arguments","prototype","append","find","selector","result","querySelectorAll","bvgs","slice","push","child_bvg","remove","parent","removeChild","parentNode","children","output","childNodes","k","RangeError","attr","getAttribute","extractNumberArray","rgba","noStroke","content","addClass","c","classList","add","removeClass","hasClass","contains","toggleClass","toggle","translate","trim","b","undefined","hsla","hue","saturation","lightness","alpha","str","match","Number","_bvg","_util","server_url","start_year","end_year","fx","ratio","bind","addEventListener","loadRoguelikeRelationsAll","then","relations","roguelikeRelations","genreInfluenceMap","focus","clientWidth","clientHeight","GUI_game","getElementById","selection","drawArc","yearA","yearB","invert","opacity","args","arcYeartoYear","_toConsumableArray","game","option","createElement","title","year","event","target","drawSelection","_ref","inspiredBy","inspirationTo","otherInspiredBy","otherInspirationTo","_ret","relation","v","_typeof","max","games","_ref2","iB","iT","oB","oT","pow","abs","coordsLUT","sx","sy","cx","cy","roguelikeInfluenceTimeline","fy","titlesToOffsetHalf","titlesToOffsetOneThird","titlesToOffsetTwoThirds","calcOffset","offset","connected","_ref3","_ref4","getJSON","x_a","x_b","promise","func","_len","Array","_key","Promise","resolve","reject","error","min","getURL","req","XMLHttpRequest","open","onload","status","response","statusText","onerror","send","JSON","parse","catch","err","console","log"],"mappings":"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","file":"bundle.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.BVG = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n//\n/** # BVG - Bindable Vector Graphics\n  * **Real-time data-driven visualisation for the web.**\n  *\n  * ![Example](https://raw.githubusercontent.com/Spaxe/BVG.js/master/demo/index.gif)\n  *\n  * Live example: http://spaxe.github.io/BVG.js/\n  *\n  * *Bindable Vector Graphics* was born out of frustration for lack of a\n  * middle level SVG library. [D3.js](http://d3js.org/) abstracts too much\n  * logic, and [SVG.js](http://svgjs.com/) provides only low-level SVG drawing.\n  * Bindable Vector Graphics offers SVG elements that change as the data change,\n  * and gives you tools to control their look.\n  */\n'use strict';\n\n/** The heart of this library is a trinity: **SVG + Data + Binding**. This\n  * connects your data to the SVG element through the binding function, which\n  * creates a living connection that can react to change. BVG uses\n  * [`Object.observe()`](http://caniuse.com/#feat=object-observe) which is\n  * available on Chrome 36+, Opera 27+ and Android Browser 37+.\n  *\n  * If you wish to use this for older browsers, you can polyfill with\n  * [`MaxArt2501/Object.observe`](https://github.com/MaxArt2501/object-observe).\n  *\n  * ## Installation\n  *\n  * **Install using `npm`**:\n  *\n  *  1. Install Node.js: https://docs.npmjs.com/getting-started/installing-node\n  *  2. In your working directory:\n  *\n  *     ```\n  *     npm install bvg\n  *     ```\n  *\n  * **Install via GitHub**:\n  *\n  *  1. Clone this repo:\n  *\n  *     ```\n  *     git clone https://github.com/Spaxe/BVG.js.git\n  *     ```\n  *\n  *  2. Copy `require.js` and `bvg.js` into your working directory.\n  *\n  * **To include `BVG.js` in your webpage**:\n  *\n  *  1. In your HTML `<head>`, include this script using `require.js`:\n  *\n  *     ```HTML\n  *     <script src=\"path/to/require.js\" data-main=\"your-script.js\"></script>\n  *     ```\n  *\n  *  2. In `your-script.js`, define your own code with\n  *\n  *     ```Javascript\n  *     require(['path/to/bvg.js'], function (BVG) {\n  *       // your code goes here ...\n  *     });\n  *     ```\n  *\n  * ## Quickstart\n  *\n  * ![Quickstart Example](https://raw.githubusercontent.com/Spaxe/BVG.js/master/demo/001-hello.gif)\n  *\n  * HTML:\n  *\n  * ```HTML\n  * <div id=\"bvg-container\"></div>\n  * ```\n  *\n  * CSS (Make the container large enough):\n  *\n  * ```CSS\n  * html, body, #bvg-container {\n  *   height: 100%;\n  *   margin: 0;\n  * }\n  * ```\n  *\n  * Javascript:\n  *\n  * ```Javascript\n  * // Create a BVG container based on selected HTML element\n  * var bvg = BVG.create('#bvg-container');\n  * // Create a Bindable circle, colour it orange\n  * var circle = bvg.ellipse(0, 0, 150, 150)\n  *                 .fill(220, 64, 12);\n  * // Change its size based on mouse movement\n  * bvg.tag().addEventListener('mousemove', function (event) {\n  *   circle.data({\n  *     rx: event.clientX,\n  *     ry: event.clientY\n  *   });\n  * });\n  * ```\n  */\n\n/*- Deep Object.observe() */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = BVG;\nfunction observe(obj, callback) {\n\n  // Include https://github.com/MaxArt2501/object-observe if you wish to work\n  // with polyfill on browsers that don't support Object.observe()\n  Object.observe(obj, function (changes) {\n    changes.forEach(function (change) {\n\n      // Bind child property if it is an object for deep observing\n      if (obj[change.name] instanceof Object) {\n        observe(obj[change.name], callback);\n      }\n    });\n\n    // Trigger user callback\n    callback.call(this, changes);\n  });\n\n  // Immediately fire observe to initiate deep observing\n  Object.keys(obj).forEach(function (key) {\n    if (obj[key] instanceof Object) {\n      observe(obj[key], callback);\n    }\n  });\n}\n\n/*- `BVG(tag, data, binding)`\n  * The trinity of this library: SVG + Data + Binding Function.\n  *\n  * Return the BVG object created.\n  *\n  *  - `tag`    : Either a `String` for the SVG `tagName` or any [`SVGElement`](https://developer.mozilla.org/en-US/docs/Web/SVG/Element)\n  *  - `data`   : Object with arbitrary data to your desire\n  *  - `binding`: (optional) Binding function that sets the tag attributes\n  */\nfunction BVG(tag, data, binding) {\n  var bvg = this;\n  tag = tag instanceof SVGElement ? tag : document.createElementNS('http://www.w3.org/2000/svg', tag);\n  data = data || {};\n  binding = binding || function (tag, data) {\n    for (var prop in data) {\n      if (data.hasOwnProperty(prop)) {\n        tag.setAttribute(prop, data[prop]);\n      }\n    }\n  };\n\n  // Observe data object and apply binding right away\n  observe(data, function (changes) {\n    binding(tag, data);\n  });\n  binding(tag, data);\n\n  // ID function from https://gist.github.com/gordonbrander/2230317\n  tag.setAttribute('id', 'BVG_' + tag.tagName + '_' + Math.random().toString(36).substr(2, 7));\n  this._tag = tag;\n  this._data = data;\n  this._binding = binding;\n\n  // Functional circular reference\n  this._tag._getBVG = function () {\n    return bvg;\n  };\n\n  if (['svg', 'g', 'a'].indexOf(tag.tagName) < 0) {\n    if (!data.stroke) this.stroke(175);\n    if (!data.strokeWidth) this.strokeWidth(0.5);\n    if (!data.fill) this.noFill();\n  }\n\n  return this;\n};\n\n/** ## The BVG Container\n  * The rest of the documentation will assume `bvg` as our BVG container\n  * created by the example below.\n  */\n\n/** ### `BVG.create(htmlElement)`\n  * Create a BVG container inside `htmlElement`.\n  *\n  * Return the BVG container object.\n  *\n  *  - `htmlElement`  : Either a [CSS Selector](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_Started/Selectors)\n  *                     or any [HTMLElement](https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement).\n  *\n  * ```Javascript\n  * // Create a new BVG container and append it to an existing HTML element.\n  * var bvg = BVG.create('#bvg-container');\n  * ```\n  */\nvar create = exports.create = BVG.create = function (htmlElement, xDimension, yDimension) {\n  if (typeof htmlElement === 'string') htmlElement = document.querySelector(htmlElement);\n  if (!(htmlElement instanceof HTMLElement)) throw new TypeError('htmlElement (' + htmlElement + ') was not found.');\n\n  var data = {\n    'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n    version: 1.1,\n    width: '100%',\n    height: '100%'\n  };\n  yDimension = yDimension || xDimension;\n  if (xDimension) {\n    data.viewBox = [0, 0, xDimension, yDimension].join(' ');\n  }\n\n  var bvg = new BVG('svg', data);\n  htmlElement.appendChild(bvg.tag());\n  return bvg;\n};\n\n/** ## BVG Elements\n  * All BVG objects, including the container, have access to drawing functions\n  * and return reference to the new shape, which is also a BVG.\n  *\n  * ```Javascript\n  * // Create a rectangle at (0, 0) with dimensions 100x100 px and add it to bvg\n  * var rect = bvg.rect(0, 0, 100, 100);\n  * ```\n  *\n  * The BVG module also has drawing functions, which return the BVG object:\n  *\n  * ```Javascript\n  * // Create a rectangle at (0, 0) with dimensions 100x100 px\n  * // Note it uses the BVG module directly to create the rectangle.\n  * var rect = BVG.rect(0, 0, 100, 100);\n  * // Add the rectangle to an existing BVG container\n  * bvg.append(rect);\n  * ```\n  *\n  * Drawing functions can be called in a number of ways. Take `bvg.rect(x, y, width, height)`\n  * as an example below. Sometimes it is easier to use one over another style.\n  *\n  * ```Javascript\n  * bvg.rect(0, 10, 30, 70);      // Arguments style\n  * bvg.rect({                    // Object style\n  *   x: 0,\n  *   y: 10,                      // Name of the object properties must match\n  *   width: 30,                  // names of the arguments in the functions,\n  *   height: 70                  // but the order can be any.\n  * });\n  * ```\n  */\nvar creationFunctions = {\n  svg: function svg(xlink, version, width, height) {\n    return new BVG('svg', xlink.constructor.name === 'Object' ? xlink : {\n      'xmlns:xlink': xlink,\n      version: version,\n      width: width,\n      height: height\n    });\n  },\n\n  /** ### `bvg.rect(x, y, width, height)`\n    * Create a rectangle at position `(x, y)` at `width` x `height` in size.\n    *\n    * ```Javascript\n    * var rect = bvg.rect(100, 100, 300, 150);\n    * ```\n    */\n  rect: function rect(x, y, width, height) {\n    return new BVG('rect', x.constructor.name === 'Object' ? x : {\n      x: x,\n      y: y,\n      width: width,\n      height: height\n    });\n  },\n\n  /** ### `bvg.circle(cx, cy, r)`\n    * Create a circle centred on `(cx, cy)` with radius `r`.\n    *\n    * ```Javascript\n    * var circle = bvg.ellipse(100, 100, 50);\n    * ```\n    */\n  circle: function circle(x, y, r) {\n    return new BVG('circle', x.constructor.name === 'Object' ? x : {\n      x: x,\n      y: y,\n      r: r\n    }, function (tag, data) {\n      tag.setAttribute('cx', data.x);\n      tag.setAttribute('cy', data.y);\n      tag.setAttribute('r', data.r);\n    });\n  },\n\n  /** ### `bvg.ellipse(cx, cy, rx, ry)`\n    * Create a ellipse centred on `(cx, cy)` with radii `rx` and `ry`.\n    *\n    * ```Javascript\n    * var ellipse = bvg.ellipse(100, 100, 200, 180);\n    * ```\n    */\n  ellipse: function ellipse(x, y, rx, ry) {\n    return new BVG('ellipse', x.constructor.name === 'Object' ? x : {\n      x: x,\n      y: y,\n      rx: rx,\n      ry: ry\n    }, function (tag, data) {\n      tag.setAttribute('cx', data.x);\n      tag.setAttribute('cy', data.y);\n      tag.setAttribute('rx', data.rx);\n      tag.setAttribute('ry', data.ry);\n    });\n  },\n\n  /** ### `bvg.line(x1, y1, x2, y2)`\n    * Create a line from `(x1, y1)` to `(x2, y2)`.\n    *\n    * ```Javascript\n    * var line = bvg.line(100, 100, 200, 300);\n    * ```\n    */\n  line: function line(x1, y1, x2, y2) {\n    return new BVG('line', x1.constructor.name === 'Object' ? x1 : {\n      x1: x1,\n      y1: y1,\n      x2: x2,\n      y2: y2\n    });\n  },\n  /** ### `bvg.polyline([[x1, y1], [x2, y2], ...])`\n    * Create a series of lines from point to point.\n    *\n    * ```Javascript\n    * var polyline = bvg.polyline([[100, 200], [200, 300], [400, 800]]);\n    * ```\n    */\n  polyline: function polyline(points) {\n    return new BVG('polyline', points.constructor.name === 'Object' ? points : {\n      points: points\n    }, function (tag, data) {\n      tag.setAttribute('points', data.points.join(' '));\n    });\n  },\n  /** ### `bvg.polygon([[x1, y1], [x2, y2], ...])`\n    * Create a closed polygon from point to point. The last point will be\n    * connected back to the first point.\n    *\n    * ```Javascript\n    * var polygon = bvg.polygon([[100, 200], [200, 300], [400, 800]]);\n    * ```\n    */\n  polygon: function polygon(points) {\n    return new BVG('polygon', points.constructor.name === 'Object' ? points : {\n      points: points\n    }, function (tag, data) {\n      tag.setAttribute('points', data.points.join(' '));\n    });\n  },\n\n  /** ## Grouping Elements\n    * ### `bvg.group([transform])`\n    *\n    * Create a group to contain BVG objects. It acts like a BVG container with\n    * an optional `transform` attribute.\n    *\n    * ```Javascript\n    * // Create a new group and fill it with dashes.\n    * var dashes = bvg.group();\n    * for (int i = 0; i < 5; i++) {\n    *   dahses.rect(10, 10 + i * 30, 50, 20);\n    * }\n    * ```\n    */\n  group: function group(transform) {\n    return new BVG('g', transform.constructor.name === 'Object' ? transform : {\n      transform: transform\n    });\n  },\n\n  /** ## Hyperlinks\n    * ### `bvg.hyperlink(url)`\n    *\n    * Create a hyperlink BVG to target URL `url`. It does not have any display\n    * elements. Make sure to append elements to it.\n    *\n    * ```Javascript\n    * // Clicking on this element will bring them to the Github page\n    * var githubLink = bvg.hyperlink('https://github.com/spaxe/BVG.js');\n    * // Make a button and attack it to the link\n    * githubLink.ellipse(200, 200, 50, 50);\n    * ```\n    */\n  hyperlink: function hyperlink(url) {\n    return new BVG('a', url.constructor.name === 'Object' ? url : {\n      'xmlns:href': url\n    });\n  },\n\n  /** ## Other Geometry\n    * ### `bvg.triangle(cx, cy, r)`\n    * Create a regular triangle centred on `(cx, cy)` with vertices `r` distance\n    * away.\n    *\n    * ```Javascript\n    * var triangle = bvg.triangle(50, 50, 10);\n    * ```\n    */\n  triangle: function triangle(x, y, r) {\n    return new BVG('polygon', x.constructor.name === 'Object' ? x : {\n      x: x,\n      y: y,\n      r: r\n    }, function (tag, data) {\n      var points = [[data.x, data.y - data.r], [data.x - data.r / 2 * Math.sqrt(3), data.y + data.r / 2], [data.x + data.r / 2 * Math.sqrt(3), data.y + data.r / 2]];\n      tag.setAttribute('points', points.join(' '));\n    });\n  },\n\n  /** ### `bvg.arc(cx, cy, rx, ry, startAngle, endAngle)`\n    * Create an arc centred on `(cx, cy)` with radius `rx` and `ry`, starting\n    * from `startAngle` anti-clockwise to `endAngle`, where 0 is the positive\n    * x-axis.\n    *\n    * ```Javascript\n    * var arc = bvg.arc(50, 50, 50, 100, 0, Math.PI);\n    * ```\n    */\n  arc: function arc(x, y, rx, ry, startAngle, endAngle) {\n    return new BVG('path', x.constructor.name === 'Object' ? x : {\n      x: x,\n      y: y,\n      rx: rx,\n      ry: ry,\n      startAngle: startAngle,\n      endAngle: endAngle\n    }, function (tag, data) {\n      var p1 = getPointOnEllipse(data.x, data.y, data.rx, data.ry, data.startAngle);\n      var p2 = getPointOnEllipse(data.x, data.y, data.rx, data.ry, data.endAngle);\n      var largeArc = data.endAngle - data.startAngle > Math.PI ? 1 : 0;\n      var sweepArc = data.endAngle > data.startAngle ? 1 : 0;\n      var d = [['M', p1.x, p1.y], ['A', data.rx, data.ry, 0, largeArc, sweepArc, p2.x, p2.y]];\n      tag.setAttribute('d', d.map(function (x) {\n        return x.join(' ');\n      }).join(' '));\n\n      function getPointOnEllipse(x, y, rx, ry, angle) {\n        return {\n          x: rx * Math.cos(angle) + x,\n          y: ry * Math.sin(angle) + y\n        };\n      }\n    });\n  },\n\n  /** ### `bvg.text(text, x, y)`\n    * Create a string of `text` text at location `(x, y)`.\n    *\n    * ```Javascript\n    * var text = bvg.text('Mrraa!', 20, 10);\n    * ```\n    */\n  text: function text(_text, x, y) {\n    return new BVG('text', _text.constructor.name === 'Object' ? _text : {\n      text: _text,\n      x: x,\n      y: y\n    }, function (tag, data) {\n      tag.innerHTML = data.text;\n      tag.setAttribute('x', data.x);\n      tag.setAttribute('y', data.y);\n    }).fill('rgba(175, 175, 175, 1)').stroke('rgba(0, 0, 0, 0)');\n  }\n};\n\nObject.keys(creationFunctions).forEach(function (f) {\n  BVG[f] = function () {\n    return creationFunctions[f].apply(BVG, arguments);\n  };\n  BVG.prototype[f] = function () {\n    var bvg = creationFunctions[f].apply(this, arguments);\n    this.append(bvg);\n    return bvg;\n  };\n});\n\n/** ## The BVG Object\n  * BVGs are SVGs with extra superpowers.\n  */\n\n/** ### `bvg.find(selector)`\n  * Return an array of BVGs matching `selector` inside BVG. `selector` is\n  * defined as [CSS Selectors](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Getting_started/Selectors).\n  */\nBVG.prototype.find = function (selector) {\n  var result = this._tag.querySelectorAll(selector);\n  if (result) {\n    var bvgs = [];\n    [].slice.call(result).forEach(function (r) {\n      bvgs.push(r._getBVG());\n    });\n    return bvgs;\n  }\n  return [];\n};\n\n/** ### `bvg.append(bvg)`\n  * Insert `child_bvg` inside `bvg`. This is useful to add elements inside a\n  * `BVG.group()`.\n  */\nBVG.prototype.append = function (child_bvg) {\n  this._tag.appendChild(child_bvg._tag);\n  return this;\n};\n\n/** ### `bvg.remove()`\n  * Remove itself from its parent. Return self reference.\n  */\nBVG.prototype.remove = function () {\n  var parent = this.parent();\n  if (parent) {\n    parent._tag.removeChild(this._tag);\n  }\n  return this;\n};\n\n/** ### `bvg.parent()`\n  * Return the parent BVG. If there is no parent (such is the case for the BVG\n  * container itself), return null.\n  */\nBVG.prototype.parent = function () {\n  if (this._tag.parentNode && typeof this._tag.parentNode._getBVG === 'function') return this._tag.parentNode._getBVG();\n  return null;\n};\n\n/** ### `bvg.children()`\n  * Return a list of BVG elements inside `bvg`.\n  */\nBVG.prototype.children = function () {\n  var output = [];\n  for (var i = 0; i < this._tag.childNodes.length; i++) {\n    if (typeof this._tag.childNodes[i]._getBVG === 'function') output.push(this._tag.childNodes[i]._getBVG());\n  }return output;\n};\n\n/** ### `bvg.tag()`\n  * Return thw BVG graphical content, a SVG.\n  */\nBVG.prototype.tag = function () {\n  return this._tag;\n};\n\n/** ### `bvg.data()`\n * Get/set the `data` object in a BVG. There are four ways to use this\n * function.\n *\n *  - `bvg.data()`: Return `data` bound to the BVG.\n *  - `bvg.data(newData)`: Update `data` with `newData` object.\n *  - `bvg.data(property)`: Return `data[property]` from the BVG.\n *  - `bvg.data(property, newValue)`: Update `property` with `newValue`.\n *\n * Return `bvg` object reference.\n */\nBVG.prototype.data = function () {\n  if (arguments.length === 0) {\n    return this._data;\n  } else if (arguments.length === 1) {\n    if (arguments[0].constructor.name === 'Object') {\n      for (var k in arguments[0]) {\n        if (arguments[0].hasOwnProperty(k)) {\n          this.data(k, arguments[0][k]);\n        }\n      }\n      return this;\n    } else {\n      return this._data[arguments[0]];\n    }\n  } else if (arguments.length === 2) {\n    this._data[arguments[0]] = arguments[1];\n    return this;\n  } else {\n    throw new RangeError(this, 'data() received more than 2 arguments.');\n  }\n};\n\n/** ### `bvg.attr()`\n  * Get/set attributes on a BVG.\n  *\n  *  - `bvg.attr(attr)`: Return attribute value.\n  *  - `bvg.attr(attr, value)`: Update `attr` with `value`.\n  */\nBVG.prototype.attr = function (attr, value) {\n  if (!attr) throw new Error('attr must be defined');\n  if (!value) return this._tag.getAttribute(attr);else this._tag.setAttribute(attr, value);\n  return this;\n};\n\n/** ### `bvg.fill()`\n  * Get/set the filling colour.\n  *\n  *  - `bvg.fill()`: Return `fill` colour as [r, g, b, a], or `''` (empty\n  *                  strig) if fill is not specified on the object.\n  *  - `bvg.fill(rgb)`: Set `fill` with a greyscale colour with equal\n  *    values `(rgb, rgb, rgb)`.\n  *  - `bvg.fill(r, g, b, [a])`: Set `fill` with `(r, g, b, a)`. If `a`\n  *    is omitted, it defaults to `1`.\n  *\n  * `r`, `g`, `b` should be in the range of 0-255 inclusive.\n  */\nBVG.prototype.fill = function () {\n  if (arguments.length === 0) {\n    var f = this.attr('fill');\n    if (f) return BVG.extractNumberArray(f);\n    return '';\n  } else if (arguments.length === 1) {\n    if (typeof arguments[0] === 'string') return this.attr('fill', arguments[0]);else return this.attr('fill', BVG.rgba(arguments[0]));\n  } else if (arguments.length === 3 || arguments.length === 4) {\n    return this.attr('fill', BVG.rgba.apply(BVG, arguments));\n  } else {\n    throw new RangeError(this, 'fill() received more than 1 argument.');\n  }\n};\n\n/** ### `bvg.noFill()`\n  * Remove BVG object's colour filling completely.\n  */\nBVG.prototype.noFill = function () {\n  return this.fill('rgba(0, 0, 0, 0)');\n};\n\n/** ### `bvg.stroke()`\n  * Get/set the outline colour.\n  *\n  *  - `bvg.stroke()`: Return `stroke` colour as [r, g, b, a]. If `stroke` is\n  *    not specified, return `''` (empty string).\n  *  - `bvg.stroke(rgb)`: Set `stroke` with a greyscale colour with equal\n  *    values `(rgb, rgb, rgb)`.\n  *  - `bvg.stroke(r, g, b, [a])`: Set `stroke` with `(r, g, b, a)`. If `a`\n  *    is omitted, it defaults to `1`.\n  *\n  * `r`, `g`, `b` should be in the range of 0-255 inclusive.\n  */\nBVG.prototype.stroke = function () {\n  if (arguments.length === 0) {\n    var s = this.attr('stroke');\n    if (s) return BVG.extractNumberArray(s);\n    return '';\n  } else if (arguments.length === 1) {\n    if (typeof arguments[0] === 'string') return this.attr('stroke', arguments[0]);else return this.attr('stroke', BVG.rgba(arguments[0]));\n  } else if (arguments.length === 3 || arguments.length === 4) {\n    return this.attr('stroke', BVG.rgba.apply(BVG, arguments));\n  } else {\n    throw new RangeError(this, 'stroke() received more than 1 argument.');\n  }\n};\n\n/** ### `bvg.strokeWidth([width])`\n  * Get/set the outline thickness.\n  *\n  * Returns the current outline thickness if `width` is omitted. Otherise,\n  * it assigns the outline thickness with a new value, and returns the `bvg`\n  * object reference.\n  *\n  *  - `width`  : Outline thickness in pixels.\n  */\nBVG.prototype.strokeWidth = function () {\n  if (arguments.length === 0) {\n    return this.attr('stroke-width');\n  } else if (arguments.length === 1) {\n    this.attr('stroke-width', arguments[0]);\n    return this;\n  } else {\n    throw new RangeError(this, 'strokeWidth() received more than 1 argument.');\n  }\n};\n\n/** ### `bvg.noStroke()`\n  * Remove BVG object's outline completely.\n  */\nBVG.prototype.noStroke = function () {\n  return this.strokeWidth(0).stroke('rgba(0, 0, 0, 0)');\n};\n\nBVG.prototype.content = function () {\n  if (arguments.length === 0) {\n    return this._tag.innerHTML;\n  } else if (arguments.length === 1) {\n    this._tag.innerHTML = arguments[0];\n    return this;\n  } else {\n    throw new RangeError(this, 'content() received more than 1 argument.');\n  }\n};\n\n/** ### `bvg.addClass(c)`\n* Add a class name to the element.\n*/\nBVG.prototype.addClass = function (c) {\n  this._tag.classList.add(c);\n  return this;\n};\n\n/** ### `bvg.removeClass(c)`\n  * Remove a class name to the element.\n  */\nBVG.prototype.removeClass = function (c) {\n  this._tag.classList.remove(c);\n  return this;\n};\n\n/** ### `bvg.hasClass(c)`\n  * Return true if the element has class `c`.\n  */\nBVG.prototype.hasClass = function (c) {\n  return this._tag.classList.contains(c);\n};\n\n/** ### `bvg.removeClass(c)`\n  * Add or remove the class `c` to the element.\n  */\nBVG.prototype.toggleClass = function (c) {\n  this._tag.classList.toggle(c);\n  return this;\n};\n\n/** ## Affine Transformations */\nBVG.prototype.transform = function () {\n  if (arguments.length === 0) {\n    return this._tag.getAttribute('transform') || '';\n  } else if (arguments.length === 1) {\n    this._tag.setAttribute('transform', arguments[0]);\n    return this;\n  } else {\n    throw new Error('transform() received more than 1 argument');\n  }\n};\n\n/** ### `BVG.translate(x, [y])`\n  * Apply a moving translation by `x` and `y` units. If `y` is not given, it\n  * is assumed to be 0.\n  */\nBVG.prototype.translate = function (x, y) {\n  if (typeof x !== 'number' && typeof y !== 'number') throw new Error('translate() only take numbers as arguments');\n  y = y || 0;\n  var transform = this.transform();\n  this._tag.setAttribute('transform', [transform, ' translate(', x, ' ', y, ')'].join('').trim());\n  return this;\n};\n\n/** ## Utility Methods */\n\n/** ### `BVG.rgba(r, g, b, [a])`\n  * Return a string in the form of `rgba(r, g, b, a)`.\n  *\n  * If only `r` is given, the value is copied to `g` and `b` to produce a\n  * greyscale value.\n  */\nBVG.rgba = function (r, g, b) {\n  var a = arguments.length <= 3 || arguments[3] === undefined ? 1.0 : arguments[3];\n\n  if (typeof r !== 'number') throw new TypeError('rgba() must take numerical values as input');\n  g = g || r;\n  b = b || r;\n  return 'rgba(' + [r, g, b, a].join(',') + ')';\n};\n\n/** ### `BVG.hsla(hue, saturation, lightness, [alpha])`\n  * Return the CSS representation in `hsla()` as a string.\n  *\n  *  - `hue`: A value between `0` and `360`, where `0` is red, `120` is green,\n  *           and `240` is blue.\n  *  - `saturation` : A value between `0` and `100`, where `0` is grey and\n  *                 `100` is fully saturate.\n  *  - `lightness`: A value between `0` and `100`, where `0` is black and\n  *                 `100` is full intensity of the colour.\n  */\nBVG.hsla = function (hue, saturation, lightness, alpha) {\n  alpha = alpha || 1.0;\n  return 'hsla(' + [hue, saturation + '%', lightness + '%', alpha].join(',') + ')';\n};\n\n/** ### `BVG.extractNumberArray(str)`\n  * Return an array `[x, y, z, ...]` from a string containing common-separated\n  * numbers.\n  */\nBVG.extractNumberArray = function (str) {\n  return str.match(/\\d*\\.?\\d+/g).map(Number);\n};\n\n/** ## Contribute to this library\n* [Make a pull request](https://github.com/Spaxe/BVG.js/pulls) or\n* [post an issue](https://github.com/Spaxe/BVG.js/issues). Say hello to\n* contact@xaiverho.com.\n*/\n\n},{}]},{},[1])(1)\n});","/**\n * Roguelike Universe\n * Author: Xavier Ho <contact@xavierho.com>\n * https://github.com/Spaxe/roguelike-universe\n */\nimport BVG from \"bvg\";\nimport { promise, ratio, getJSON } from \"./util\";\n\nconst server_url = 'http://188.166.209.155/api/v1';\nconst start_year = 1970, end_year = 2020;\nconst fx = ratio.bind(ratio, start_year, end_year);\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  loadRoguelikeRelationsAll().then( relations => {\n    roguelikeRelations(relations);\n    genreInfluenceMap(relations);\n  });\n\n});\n\nconst roguelikeRelations = (relations) => {\n\n  let bvg = BVG.create('#roguelike-relations');\n  let focus = bvg.group('');\n  let tag = bvg.tag();\n  let width = tag.clientWidth || tag.parentNode.clientWidth;\n  let height = tag.clientHeight || tag.parentNode.clientHeight;\n  let GUI_game = document.getElementById('game');\n  let selection = 'Dungeon';\n\n  let drawArc = (g, yearA, yearB, invert=-1.0, opacity=1, strokeWidth=1) => {\n    let args = arcYeartoYear(yearA, yearB, invert);\n    args[0] *= width; args[1] *= height; args[2] *= height; args[3] *= height;\n    g.arc(...args).stroke(0, 0, 0, opacity).strokeWidth(strokeWidth);\n  };\n\n  // Draw timeline\n  bvg.text('year',\n           0.001 * width,\n           height / 2 + 3);\n  for (let i = start_year + 2; i < end_year; i++) {\n    if (i % 5 === 0) {\n      bvg.text(i.toString(),\n               (fx(i) - 0.02) * width,\n               height / 2 + 3\n      ).fill(0);\n    } else {\n      bvg.text('Â·',\n               (fx(i) - 0.0025) * width,\n               height / 2 + 3\n      ).fill(0);\n    }\n  }\n  bvg.text('In-genre',\n           0.001 * width,\n           0.1 * height);\n  bvg.text('Out-of-genre',\n           0.001 * width,\n           0.9 * height);\n\n\n  // Populate game titles\n  relations.forEach( game => {\n    let option = document.createElement('option');\n    option.value = game.title;\n    option.setAttribute('data-year', game.year);\n    option.innerHTML = `${game.title} (${game.year})`;\n    GUI_game.appendChild(option);\n  });\n\n  // Bind selection\n  GUI_game.addEventListener('change', event => {\n    selection = event.target.value;\n    drawSelection(selection);\n  });\n\n  // Draw influence arcs\n  relations.forEach( ({title, year, inspiredBy, inspirationTo, otherInspiredBy, otherInspirationTo}) => {\n\n    inspiredBy.forEach( r => {\n      drawArc(bvg, year, r.year, -1.0, 0.1);\n    });\n    inspirationTo.forEach( r => {\n      drawArc(bvg, r.year, year, -1.0, 0.1);\n    });\n    otherInspiredBy.forEach( r => {\n      drawArc(bvg, year, r.year, 1.0, 0.05);\n    });\n    otherInspirationTo.forEach( r => {\n      drawArc(bvg, r.year, year, 1.0, 0.05);\n    });\n\n  });\n\n  let drawSelection = (selection) => {\n    focus.tag().innerHTML = '';\n\n    for (let i = 0; i < relations.length; i++) {\n      const relation = relations[i];\n      if (relation.title === selection) {\n\n        focus.text(selection, fx(relation.year - 2) * width, 0.095 * height)\n          .fill(0);\n\n        focus.line({\n          x1: fx(relation.year) * width,\n          y1: height * 0.1,\n          x2: fx(relation.year) * width,\n          y2: height * 0.9\n        }).strokeWidth(2).stroke(0, 0, 0, 0.5);\n\n        relation.inspiredBy.forEach( r => {\n          drawArc(focus, relation.year, r.year, -1, 1, 3);\n        });\n        relation.inspirationTo.forEach( r => {\n          drawArc(focus, r.year, relation.year, -1, 1, 3);\n        });\n        relation.otherInspiredBy.forEach( r => {\n          drawArc(focus, relation.year, r.year, 1, 1, 3);\n        });\n        relation.otherInspirationTo.forEach( r => {\n          drawArc(focus, r.year, relation.year, 1, 1, 3);\n        });\n\n        return;\n      }\n    }\n  };\n\n  // Fire event to start\n  GUI_game.value = selection;\n  drawSelection(selection);\n};\n\nconst genreInfluenceMap = (relations) => {\n\n  let bvg = BVG.create('#genre-influence');\n  let focus = bvg.group('');\n  let tag = bvg.tag();\n  let width = tag.clientWidth || tag.parentNode.clientWidth;\n  let height = tag.clientHeight || tag.parentNode.clientHeight;\n  let radius = 3;\n\n  // Axis\n  bvg.line(0.1 * width, 0.01 * height, 0.1 * width, 0.9 * height).stroke(0);\n  bvg.line(0.1 * width, 0.9 * height, 0.99 * width, 0.9 * height).stroke(0);\n  let verticalLabelIn = bvg.group(`translate(${0.09 * width} ${0.15 * height})`);\n  verticalLabelIn.text('Influences from in-genre', 0, 0).transform('rotate(-90)');\n  let verticalLabelOut = bvg.group(`translate(${0.09 * width} ${0.9 * height})`);\n  verticalLabelOut.text('Influences from out-of-genre', 0, 0).transform('rotate(-90)');\n  bvg.text('Influenced by the past', 0.11 * width, 0.915 * height);\n  bvg.text('Influences the future', 0.87 * width, 0.915 * height);\n\n  let max = 0;\n  let games = relations.map( ({title, year, inspiredBy, inspirationTo, otherInspiredBy, otherInspirationTo}) => {\n\n    if ([\n      'Dungeon Crawl Stone Soup',\n      'PokÃ©mon Mystery Dungeon: Explorers of Time and Explorers of Darkness',\n      'Shiren the Wanderer',\n      'Mystery Dungeon: Shiren the Wanderer',\n      'Weird Worlds: Return to Infinite Space',\n      'PokÃ©mon Mystery Dungeon: Explorers of Sky',\n      'Izuna 2: The Unemployed Ninja Returns',\n      'Sword of the Stars: The Pit',\n      \"Tao's Adventure: Curse of the Demon Sea\",\n      'Dragon Quest: Shonen Yangus to Fushigi no Dungeon',\n      'Teleglitch',\n      \"Moraff's Revenge\",\n      'Doom, the Roguelike',\n      \"Chocobo's Dungeon 2\",\n      'Not the Robots',\n      \"Slaves to Armok II: Dwarf Fortress\",\n      'Izuna: Legend of the Unemployed Ninja',\n      'Deadly Dungeons',\n      \"Tao's Adventure: Curse of the Demon Seal\",\n      'Chocobo no Fushigina Dungeon',\n      'Rogue Legacy'\n    ].indexOf(title) >= 0) return {title, x: 0, y: 0};\n\n    let iB = inspiredBy.length;\n    let iT = inspirationTo.length;\n    let oB = otherInspiredBy.length / 4;\n    let oT = otherInspirationTo.length / 4;\n    let x = -iB - oB + iT + oT;\n    let y = -iB + oB - iT + oT;\n    max = Math.max(max, Math.pow(Math.abs(x), 2), Math.pow(Math.abs(y), 2)) + 1;\n    return { title, x, y };\n\n  });\n\n  let coordsLUT = {};\n  games.forEach( c => {\n    let sx = c.x && c.x / Math.abs(c.x);\n    let sy = c.y && c.y / Math.abs(c.y);\n    let cx = Math.abs(c.x) > 0 ? Math.sqrt(Math.abs(c.x)) * 2 : 0;\n    let cy = Math.abs(c.y) > 0 ? Math.sqrt(Math.abs(c.y)) * 2 : 0;\n    let x = (0.5 + sx * cx / Math.sqrt(max)) * width;\n    let y = (0.5 + sy * cy / Math.sqrt(max)) * height;\n    coordsLUT[c.title] = {x, y};\n    if (c.x === 0 && c.y === 0) return;\n    bvg.circle(x, y, radius).fill(0);\n    bvg.text(c.title, x + 5, y + 3).fill(0);\n  });\n\n  roguelikeInfluenceTimeline(relations, coordsLUT);\n\n};\n\nconst roguelikeInfluenceTimeline = (relations, coordsLUT) => {\n\n  let bvg = BVG.create('#influence-timeline');\n  let tag = bvg.tag();\n  let width = tag.clientWidth || tag.parentNode.clientWidth;\n  let height = tag.clientHeight || tag.parentNode.clientHeight;\n  let radius = 3;\n  let fy = ratio.bind(ratio, start_year + 7, end_year - 5) ;\n\n  let verticalLabelIn = bvg.group(`translate(${0.007 * width} ${0.04 * height})`);\n  verticalLabelIn.text('year', 0, 0).transform('rotate(-90)').fill(0);\n  for (let i = start_year + 8; i <= end_year - 6; i++) {\n    bvg.text(i.toString(), 0.025 * width, fy(i) * height + 3).fill(0);\n  }\n\n  bvg.line(0.015 * width, 0.02 * height, 0.015 * width, 0.99 * height).stroke(0);\n\n  let titlesToOffsetHalf = [\n    \"Sword of Fargoal\",\n    \"Torneko no Daiboken: Fushigi no Dungeon\",\n    \"Chocobo no Fushigina Dungeon\",\n    \"Super Lotsa Added Stuff Hack - Extended Magic\",\n    \"Tao's Adventure: Curse of the Demon Seal\",\n    \"PokÃ©mon Mystery Dungeon: Explorers of Time and Explorers of Darkness\",\n    \"Shiren the Wanderer\",\n    \"Sword of the Stars: The Pit\",\n    \"Risk of Rain\",\n    \"WazHack\",\n    \"Infinite Space III: Sea of Stars\",\n    \"Smart Kobold\",\n  ];\n\n  let titlesToOffsetOneThird = [\n    \"WazHack\",\n    \"Izuna: Legend of the Unemployed Ninja\",\n  ];\n\n  let titlesToOffsetTwoThirds = [\n    \"Dungeon Crawl Stone Soup\",\n    \"TowerClimb\",\n  ];\n\n  const calcOffset = (title) => {\n    let offset = titlesToOffsetHalf.indexOf(title) < 0 ? 0 : 16;\n        offset = titlesToOffsetOneThird.indexOf(title) < 0 ? offset : 10;\n        offset = titlesToOffsetTwoThirds.indexOf(title) < 0 ? offset : 21;\n    return offset;\n  }\n\n  let connected = {};\n\n  relations.forEach( ({title, year, inspiredBy, inspirationTo}, i) => {\n\n    if (year > 2014 ||\n        (inspiredBy.length === 0 && inspirationTo.length === 0))\n      return;\n\n    let offset = calcOffset(title);\n\n    let x = coordsLUT[title].x;\n    let y = fy(year) * height + offset;\n\n    inspiredBy.forEach( r => {\n      if (Math.abs(year - r.year) > 15) return;\n      let offset = calcOffset(r.title);\n      let x2 = coordsLUT[r.title].x;\n      let y2 = fy(r.year) * height + offset;\n      bvg.line(x, y, x2, y2);\n      connected[r.title] = true;\n      connected[title] = true;\n    });\n    inspirationTo.forEach( r => {\n      if (Math.abs(year - r.year) > 15) return;\n      let offset = calcOffset(r.title);\n      let x2 = coordsLUT[r.title].x;\n      let y2 = fy(r.year) * height + offset;\n      bvg.line(x, y, x2, y2);\n      connected[r.title] = true;\n      connected[title] = true;\n    });\n\n  });\n\n  relations.forEach( ({title, year}) => {\n\n    let offset = calcOffset(title);\n\n    if (connected[title]) {\n      let x = coordsLUT[title].x;\n      let y = fy(year) * height + offset;\n      bvg.circle(x, y, radius).fill(0);\n      bvg.text(title, x + 5, y + 3).fill(0);\n    }\n\n  });\n\n};\n\nconst loadRoguelikeRelationsAll = () => {\n\n  return getJSON(`data.json`);\n\n};\n\nlet arcYeartoYear = (a, b, invert=-1.0) => {\n\n  let x_a = fx(a);\n  let x_b = fx(b);\n  let x = (x_a + x_b) / 2;\n  let y = 0.5 + 0.01 * invert;\n  let rx = Math.abs(x_b - x_a) / 2;\n  let ry = rx;\n  let startAngle = 0;\n  let endAngle = Math.PI * invert;\n  return [x, y, rx, ry, startAngle, endAngle];\n\n};\n\n","export const promise = ( func, ...args ) => {\n\n  return new Promise( ( resolve, reject ) => {\n    const callback = ( error, data ) => {\n      if (error) reject(error);\n      else resolve(data);\n    };\n    args.push(callback);\n    func.apply(func, args);\n  });\n\n};\n\nexport const ratio = (min, max, x) => {\n\n  return (x - min) / (max - min);\n\n};\n\nexport const getURL = (url) => {\n  return new Promise(function (resolve, reject) {\n    var req = new XMLHttpRequest();\n    req.open('GET', url);\n    req.onload = function () {\n      if (req.status == 200) {\n        resolve(req.response);\n      } else {\n        reject(new Error(req.statusText));\n      }\n    };\n    req.onerror = function() {\n      reject(new Error('Network Error'));\n    };\n    req.send();\n  });\n};\n\nexport const getJSON = (url) => {\n  return getURL(url).then(JSON.parse).catch(function (err) {\n    console.log('getJSON failed to load', url);\n    throw err;\n  });\n};"]}