(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
(function (global){
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.BVG=t()}}(function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[s]={exports:{}};e[s][0].call(f.exports,function(t){var r=e[s][1][t];return i(r?r:t)},f,f.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";function n(t,e){Object.observe(t,function(r){r.forEach(function(r){t[r.name]instanceof Object&&n(t[r.name],e)}),e.call(this,r)}),Object.keys(t).forEach(function(r){t[r]instanceof Object&&n(t[r],e)})}function i(t,e,r){var i=this;return t=t instanceof SVGElement?t:document.createElementNS("http://www.w3.org/2000/svg",t),e=e||{},r=r||function(t,e){for(var r in e)e.hasOwnProperty(r)&&t.setAttribute(r,e[r])},n(e,function(n){r(t,e)}),r(t,e),t.setAttribute("id","BVG_"+t.tagName+"_"+Math.random().toString(36).substr(2,7)),this._tag=t,this._data=e,this._binding=r,this._tag._getBVG=function(){return i},["svg","g","a"].indexOf(t.tagName)<0&&(e.stroke||this.stroke(175),e.strokeWidth||this.strokeWidth(.5),e.fill||this.noFill()),this}Object.defineProperty(r,"__esModule",{value:!0}),r["default"]=i;var o=(r.create=i.create=function(t,e,r){if("string"==typeof t&&(t=document.querySelector(t)),!(t instanceof HTMLElement))throw new TypeError("htmlElement ("+t+") was not found.");var n={"xmlns:xlink":"http://www.w3.org/1999/xlink",version:1.1,width:"100%",height:"100%"};r=r||e,e&&(n.viewBox=[0,0,e,r].join(" "));var o=new i("svg",n);return t.appendChild(o.tag()),o},{svg:function(t,e,r,n){return new i("svg","Object"===t.constructor.name?t:{"xmlns:xlink":t,version:e,width:r,height:n})},rect:function(t,e,r,n){return new i("rect","Object"===t.constructor.name?t:{x:t,y:e,width:r,height:n})},circle:function(t,e,r){return new i("circle","Object"===t.constructor.name?t:{x:t,y:e,r:r},function(t,e){t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("r",e.r)})},ellipse:function(t,e,r,n){return new i("ellipse","Object"===t.constructor.name?t:{x:t,y:e,rx:r,ry:n},function(t,e){t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("rx",e.rx),t.setAttribute("ry",e.ry)})},line:function(t,e,r,n){return new i("line","Object"===t.constructor.name?t:{x1:t,y1:e,x2:r,y2:n})},polyline:function(t){return new i("polyline","Object"===t.constructor.name?t:{points:t},function(t,e){t.setAttribute("points",e.points.join(" "))})},polygon:function(t){return new i("polygon","Object"===t.constructor.name?t:{points:t},function(t,e){t.setAttribute("points",e.points.join(" "))})},group:function(t){return new i("g","Object"===t.constructor.name?t:{transform:t})},hyperlink:function(t){return new i("a","Object"===t.constructor.name?t:{"xmlns:href":t})},triangle:function(t,e,r){return new i("polygon","Object"===t.constructor.name?t:{x:t,y:e,r:r},function(t,e){var r=[[e.x,e.y-e.r],[e.x-e.r/2*Math.sqrt(3),e.y+e.r/2],[e.x+e.r/2*Math.sqrt(3),e.y+e.r/2]];t.setAttribute("points",r.join(" "))})},arc:function(t,e,r,n,o,s){return new i("path","Object"===t.constructor.name?t:{x:t,y:e,rx:r,ry:n,startAngle:o,endAngle:s},function(t,e){function r(t,e,r,n,i){return{x:r*Math.cos(i)+t,y:n*Math.sin(i)+e}}var n=r(e.x,e.y,e.rx,e.ry,e.startAngle),i=r(e.x,e.y,e.rx,e.ry,e.endAngle),o=e.endAngle-e.startAngle>Math.PI?1:0,s=e.endAngle>e.startAngle?1:0,a=[["M",n.x,n.y],["A",e.rx,e.ry,0,o,s,i.x,i.y]];t.setAttribute("d",a.map(function(t){return t.join(" ")}).join(" "))})},text:function(t,e,r){return new i("text","Object"===t.constructor.name?t:{text:t,x:e,y:r},function(t,e){t.innerHTML=e.text,t.setAttribute("x",e.x),t.setAttribute("y",e.y)}).fill("rgba(175, 175, 175, 1)").stroke("rgba(0, 0, 0, 0)")}});Object.keys(o).forEach(function(t){i[t]=function(){return o[t].apply(i,arguments)},i.prototype[t]=function(){var e=o[t].apply(this,arguments);return this.append(e),e}}),i.prototype.find=function(t){var e=this._tag.querySelectorAll(t);if(e){var r=[];return[].slice.call(e).forEach(function(t){r.push(t._getBVG())}),r}return[]},i.prototype.append=function(t){return this._tag.appendChild(t._tag),this},i.prototype.remove=function(){var t=this.parent();return t&&t._tag.removeChild(this._tag),this},i.prototype.parent=function(){return this._tag.parentNode&&"function"==typeof this._tag.parentNode._getBVG?this._tag.parentNode._getBVG():null},i.prototype.children=function(){for(var t=[],e=0;e<this._tag.childNodes.length;e++)"function"==typeof this._tag.childNodes[e]._getBVG&&t.push(this._tag.childNodes[e]._getBVG());return t},i.prototype.tag=function(){return this._tag},i.prototype.data=function(){if(0===arguments.length)return this._data;if(1===arguments.length){if("Object"===arguments[0].constructor.name){for(var t in arguments[0])arguments[0].hasOwnProperty(t)&&this.data(t,arguments[0][t]);return this}return this._data[arguments[0]]}if(2===arguments.length)return this._data[arguments[0]]=arguments[1],this;throw new RangeError(this,"data() received more than 2 arguments.")},i.prototype.attr=function(t,e){if(!t)throw new Error("attr must be defined");return e?(this._tag.setAttribute(t,e),this):this._tag.getAttribute(t)},i.prototype.fill=function(){if(0===arguments.length){var t=this.attr("fill");return t?i.extractNumberArray(t):""}if(1===arguments.length)return"string"==typeof arguments[0]?this.attr("fill",arguments[0]):this.attr("fill",i.rgba(arguments[0]));if(3===arguments.length||4===arguments.length)return this.attr("fill",i.rgba.apply(i,arguments));throw new RangeError(this,"fill() received more than 1 argument.")},i.prototype.noFill=function(){return this.fill("rgba(0, 0, 0, 0)")},i.prototype.stroke=function(){if(0===arguments.length){var t=this.attr("stroke");return t?i.extractNumberArray(t):""}if(1===arguments.length)return"string"==typeof arguments[0]?this.attr("stroke",arguments[0]):this.attr("stroke",i.rgba(arguments[0]));if(3===arguments.length||4===arguments.length)return this.attr("stroke",i.rgba.apply(i,arguments));throw new RangeError(this,"stroke() received more than 1 argument.")},i.prototype.strokeWidth=function(){if(0===arguments.length)return this.attr("stroke-width");if(1===arguments.length)return this.attr("stroke-width",arguments[0]),this;throw new RangeError(this,"strokeWidth() received more than 1 argument.")},i.prototype.noStroke=function(){return this.strokeWidth(0).stroke("rgba(0, 0, 0, 0)")},i.prototype.content=function(){if(0===arguments.length)return this._tag.innerHTML;if(1===arguments.length)return this._tag.innerHTML=arguments[0],this;throw new RangeError(this,"content() received more than 1 argument.")},i.prototype.addClass=function(t){return this._tag.classList.add(t),this},i.prototype.removeClass=function(t){return this._tag.classList.remove(t),this},i.prototype.hasClass=function(t){return this._tag.classList.contains(t)},i.prototype.toggleClass=function(t){return this._tag.classList.toggle(t),this},i.prototype.transform=function(){if(0===arguments.length)return this._tag.getAttribute("transform")||"";if(1===arguments.length)return this._tag.setAttribute("transform",arguments[0]),this;throw new Error("transform() received more than 1 argument")},i.prototype.translate=function(t,e){if("number"!=typeof t&&"number"!=typeof e)throw new Error("translate() only take numbers as arguments");e=e||0;var r=this.transform();return this._tag.setAttribute("transform",[r," translate(",t," ",e,")"].join("").trim()),this},i.rgba=function(t,e,r){var n=arguments.length<=3||void 0===arguments[3]?1:arguments[3];if("number"!=typeof t)throw new TypeError("rgba() must take numerical values as input");return e=e||t,r=r||t,"rgba("+[t,e,r,n].join(",")+")"},i.hsla=function(t,e,r,n){return n=n||1,"hsla("+[t,e+"%",r+"%",n].join(",")+")"},i.extractNumberArray=function(t){return t.match(/\d*\.?\d+/g).map(Number)}},{}]},{},[1])(1)});
}).call(this,typeof global !== "undefined" ? global : typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})

},{}],2:[function(require,module,exports){
"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},_bvg=require("bvg"),_bvg2=_interopRequireDefault(_bvg),_util=require("./util"),server_url="http://188.166.209.155/api/v1",start_year=1970,end_year=2020,fx=_util.ratio.bind(_util.ratio,start_year,end_year);document.addEventListener("DOMContentLoaded",function(){loadRoguelikeRelationsAll().then(function(e){roguelikeRelations(e),genreInfluenceMap(e)})});var roguelikeRelations=function(e){var t=_bvg2["default"].create("#roguelike-relations"),n=t.group(""),r=t.tag(),o=r.clientWidth||r.parentNode.clientWidth,a=r.clientHeight||r.parentNode.clientHeight,i=document.getElementById("game"),l="Dungeon",u=function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?-1:arguments[3],i=arguments.length<=4||void 0===arguments[4]?1:arguments[4],l=arguments.length<=5||void 0===arguments[5]?1:arguments[5],u=arcYeartoYear(t,n,r);u[0]*=o,u[1]*=a,u[2]*=a,u[3]*=a,e.arc.apply(e,_toConsumableArray(u)).stroke(0,0,0,i).strokeWidth(l)};t.text("year",.001*o,a/2+3);for(var f=start_year+2;f<end_year;f++)f%5===0?t.text(f.toString(),(fx(f)-.02)*o,a/2+3).fill(0):t.text("·",(fx(f)-.0025)*o,a/2+3).fill(0);t.text("In-genre",.001*o,.1*a),t.text("Out-of-genre",.001*o,.9*a),e.forEach(function(e){var t=document.createElement("option");t.value=e.title,t.setAttribute("data-year",e.year),t.innerHTML=e.title+" ("+e.year+")",i.appendChild(t)}),i.addEventListener("change",function(e){l=e.target.value,s(l)}),e.forEach(function(e){var n=(e.title,e.year),r=e.inspiredBy,o=e.inspirationTo,a=e.otherInspiredBy,i=e.otherInspirationTo;r.forEach(function(e){u(t,n,e.year,-1,.1)}),o.forEach(function(e){u(t,e.year,n,-1,.1)}),a.forEach(function(e){u(t,n,e.year,1,.05)}),i.forEach(function(e){u(t,e.year,n,1,.05)})});var s=function(t){n.tag().innerHTML="";for(var r=function(r){var i=e[r];if(i.title===t)return n.text(t,fx(i.year-2)*o,.095*a).fill(0),n.line({x1:fx(i.year)*o,y1:.1*a,x2:fx(i.year)*o,y2:.9*a}).strokeWidth(2).stroke(0,0,0,.5),i.inspiredBy.forEach(function(e){u(n,i.year,e.year,-1,1,3)}),i.inspirationTo.forEach(function(e){u(n,e.year,i.year,-1,1,3)}),i.otherInspiredBy.forEach(function(e){u(n,i.year,e.year,1,1,3)}),i.otherInspirationTo.forEach(function(e){u(n,e.year,i.year,1,1,3)}),{v:void 0}},i=0;i<e.length;i++){var l=r(i);if("object"===("undefined"==typeof l?"undefined":_typeof(l)))return l.v}};i.value=l,s(l)},genreInfluenceMap=function(e){var t=_bvg2["default"].create("#genre-influence"),n=(t.group(""),t.tag()),r=n.clientWidth||n.parentNode.clientWidth,o=n.clientHeight||n.parentNode.clientHeight,a=3;t.line(.1*r,.01*o,.1*r,.9*o).stroke(0),t.line(.1*r,.9*o,.99*r,.9*o).stroke(0);var i=t.group("translate("+.09*r+" "+.15*o+")");i.text("Influences from in-genre",0,0).transform("rotate(-90)");var l=t.group("translate("+.09*r+" "+.9*o+")");l.text("Influences from out-of-genre",0,0).transform("rotate(-90)"),t.text("Influenced by the past",.11*r,.915*o),t.text("Influences the future",.87*r,.915*o);var u=0,f=e.map(function(e){var t=e.title,n=(e.year,e.inspiredBy),r=e.inspirationTo,o=e.otherInspiredBy,a=e.otherInspirationTo;if(["Dungeon Crawl Stone Soup","Pokémon Mystery Dungeon: Explorers of Time and Explorers of Darkness","Shiren the Wanderer","Mystery Dungeon: Shiren the Wanderer","Weird Worlds: Return to Infinite Space","Pokémon Mystery Dungeon: Explorers of Sky","Izuna 2: The Unemployed Ninja Returns","Sword of the Stars: The Pit","Tao's Adventure: Curse of the Demon Sea","Dragon Quest: Shonen Yangus to Fushigi no Dungeon","Teleglitch","Moraff's Revenge","Doom, the Roguelike","Chocobo's Dungeon 2","Not the Robots","Slaves to Armok II: Dwarf Fortress","Izuna: Legend of the Unemployed Ninja","Deadly Dungeons","Tao's Adventure: Curse of the Demon Seal","Chocobo no Fushigina Dungeon","Rogue Legacy"].indexOf(t)>=0)return{title:t,x:0,y:0};var i=n.length,l=r.length,f=o.length/4,s=a.length/4,c=-i-f+l+s,h=-i+f-l+s;return u=Math.max(u,Math.pow(Math.abs(c),2),Math.pow(Math.abs(h),2))+1,{title:t,x:c,y:h}}),s={};f.forEach(function(e){var n=e.x&&e.x/Math.abs(e.x),i=e.y&&e.y/Math.abs(e.y),l=Math.abs(e.x)>0?2*Math.sqrt(Math.abs(e.x)):0,f=Math.abs(e.y)>0?2*Math.sqrt(Math.abs(e.y)):0,c=(.5+n*l/Math.sqrt(u))*r,h=(.5+i*f/Math.sqrt(u))*o;s[e.title]={x:c,y:h},0===e.x&&0===e.y||(t.circle(c,h,a).fill(0),t.text(e.title,c+5,h+3).fill(0))}),roguelikeInfluenceTimeline(e,s)},roguelikeInfluenceTimeline=function(e,t){var n=_bvg2["default"].create("#influence-timeline"),r=n.tag(),o=r.clientWidth||r.parentNode.clientWidth,a=r.clientHeight||r.parentNode.clientHeight,i=3,l=_util.ratio.bind(_util.ratio,start_year+7,end_year-5),u=n.group("translate("+.007*o+" "+.04*a+")");u.text("year",0,0).transform("rotate(-90)").fill(0);for(var f=start_year+8;f<=end_year-6;f++)n.text(f.toString(),.025*o,l(f)*a+3).fill(0);n.line(.015*o,.02*a,.015*o,.99*a).stroke(0);var s=["Sword of Fargoal","Torneko no Daiboken: Fushigi no Dungeon","Chocobo no Fushigina Dungeon","Super Lotsa Added Stuff Hack - Extended Magic","Tao's Adventure: Curse of the Demon Seal","Pokémon Mystery Dungeon: Explorers of Time and Explorers of Darkness","Shiren the Wanderer","Sword of the Stars: The Pit","Risk of Rain","WazHack","Infinite Space III: Sea of Stars","Smart Kobold"],c=["WazHack","Izuna: Legend of the Unemployed Ninja"],h=["Dungeon Crawl Stone Soup","TowerClimb"],y=function(e){var t=s.indexOf(e)<0?0:16;return t=c.indexOf(e)<0?t:10,t=h.indexOf(e)<0?t:21},d={};e.forEach(function(e,r){var o=e.title,i=e.year,u=e.inspiredBy,f=e.inspirationTo;if(!(i>2014||0===u.length&&0===f.length)){var s=y(o),c=t[o].x,h=l(i)*a+s;u.forEach(function(e){if(!(Math.abs(i-e.year)>15)){var r=y(e.title),u=t[e.title].x,f=l(e.year)*a+r;n.line(c,h,u,f),d[e.title]=!0,d[o]=!0}}),f.forEach(function(e){if(!(Math.abs(i-e.year)>15)){var r=y(e.title),u=t[e.title].x,f=l(e.year)*a+r;n.line(c,h,u,f),d[e.title]=!0,d[o]=!0}})}}),e.forEach(function(e){var r=e.title,o=e.year,u=y(r);if(d[r]){var f=t[r].x,s=l(o)*a+u;n.circle(f,s,i).fill(0),n.text(r,f+5,s+3).fill(0)}})},loadRoguelikeRelationsAll=function(){return(0,_util.getJSON)("data.json")},arcYeartoYear=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?-1:arguments[2],r=fx(e),o=fx(t),a=(r+o)/2,i=.5+.01*n,l=Math.abs(o-r)/2,u=l,f=0,s=Math.PI*n;return[a,i,l,u,f,s]};
},{"./util":3,"bvg":1}],3:[function(require,module,exports){
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var promise=exports.promise=function(e){for(var r=arguments.length,t=Array(r>1?r-1:0),o=1;o<r;o++)t[o-1]=arguments[o];return new Promise(function(r,o){var n=function(e,t){e?o(e):r(t)};t.push(n),e.apply(e,t)})},ratio=exports.ratio=function(e,r,t){return(t-e)/(r-e)},getURL=exports.getURL=function(e){return new Promise(function(r,t){var o=new XMLHttpRequest;o.open("GET",e),o.onload=function(){200==o.status?r(o.response):t(new Error(o.statusText))},o.onerror=function(){t(new Error("Network Error"))},o.send()})},getJSON=exports.getJSON=function(e){return getURL(e).then(JSON.parse)["catch"](function(r){throw console.log("getJSON failed to load",e),r})};
},{}]},{},[2])


//# sourceMappingURL=roguelike-relations.map